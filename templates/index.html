<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beetiful</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <!-- TOP NAVIGATION BAR -->
    <nav class="navbar navbar-dark bg-dark border-bottom">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">Beetiful</span>
            <ul class="nav nav-tabs bg-transparent border-0">
                <li class="nav-item">
                    <button class="nav-link active" id="library-tab" data-bs-toggle="tab" data-bs-target="#library-content" type="button">
                        <i class="fas fa-music"></i> Music Library
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="config-tab" data-bs-toggle="tab" data-bs-target="#config-content" type="button">
                        <i class="fas fa-cog"></i> Configuration
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- TAB CONTENT -->
    <div class="tab-content">
        <!-- MUSIC LIBRARY TAB -->
        <div class="tab-pane fade show active" id="library-content">
            <div class="container-fluid">
                <div class="row">
                    <!-- Command Builder Sidebar -->
                    <div class="col-md-3 p-3">
                        <div class="card bg-dark border-secondary">
                            <div class="card-body">
                                <h5 class="card-title text-light">Command Builder</h5>
                                <select id="command" class="form-select bg-dark text-light border-secondary mb-2" onchange="updateCommandOptions()">
                                    <option value="" disabled selected>Choose Command</option>
                                    <option value="import">Import</option>
                                    <option value="update">Update</option>
                                    <option value="list">List</option>
                                    <option value="modify">Modify</option>
                                    <option value="config">Config</option>
                                </select>
                                <div id="command-options" class="mb-2"></div>
                                <button class="btn btn-primary w-100 mb-2" onclick="runCommand()">Run Command</button>
                                <pre id="commandPreview" class="bg-secondary text-light p-2 rounded small"></pre>
                                <pre id="commandResult" class="bg-secondary text-light p-2 rounded small"></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Main Library Content -->
                    <div class="col-md-9 p-3" id="libraryMainColumn">
                        <!-- Pagination -->
                        <div id="paginationControls" class="d-flex justify-content-center mb-3"></div>

                        <!-- Library Table -->
                        <div class="table-responsive">
                            <table class="table table-dark table-striped" id="libraryTable">
                                <thead class="table-secondary">
                                    <tr id="tableHeaders">
                                        <th data-column="0">
                                            Title <span id="totalTracks" class="badge bg-primary"></span>
                                            <input type="text" id="filterTitle" class="form-control form-control-sm bg-dark text-light border-secondary mt-1" placeholder="Filter">
                                        </th>
                                        <th data-column="1">
                                            Artist <span id="totalArtists" class="badge bg-primary"></span>
                                            <input type="text" id="filterArtist" class="form-control form-control-sm bg-dark text-light border-secondary mt-1" placeholder="Filter">
                                        </th>
                                        <th data-column="2">
                                            Album <span id="totalAlbums" class="badge bg-primary"></span>
                                            <input type="text" id="filterAlbum" class="form-control form-control-sm bg-dark text-light border-secondary mt-1" placeholder="Filter">
                                        </th>
                                        <th data-column="3">
                                            Genre
                                            <input type="text" id="filterGenre" class="form-control form-control-sm bg-dark text-light border-secondary mt-1" placeholder="Filter">
                                        </th>
                                        <th data-column="4">
                                            Year
                                            <input type="text" id="filterYear" class="form-control form-control-sm bg-dark text-light border-secondary mt-1" placeholder="Filter">
                                        </th>
                                        <th data-column="5">
                                            BPM
                                            <input type="text" id="filterBPM" class="form-control form-control-sm bg-dark text-light border-secondary mt-1" placeholder="Filter">
                                        </th>
                                        <th data-column="6">
                                            Composer
                                            <input type="text" id="filterComposer" class="form-control form-control-sm bg-dark text-light border-secondary mt-1" placeholder="Filter">
                                        </th>
                                        <th>
                                            <button class="btn btn-outline-danger btn-sm" onclick="clearFilters()">Clear Filters</button>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="libraryResults">
                                    <!-- Populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Edit Form Panel (Hidden by default) -->
                    <div class="col-md-3 p-3" id="editFormColumn" style="display: none;">
                        <div class="card bg-dark border-secondary">
                            <div class="card-body" id="editFormContainer">
                                <!-- Shows when editing a track -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONFIGURATION TAB -->
        <div class="tab-pane fade" id="config-content">
            <div class="container-fluid p-3">
                <div class="row">
                    <!-- Config Editor -->
                    <div class="col-lg-6">
                        <div class="card bg-dark border-secondary h-100">
                            <div class="card-body">
                                <h5 class="card-title text-light"><i class="fas fa-edit"></i> Config Editor</h5>
                                <p class="text-muted">Edit your beets configuration directly</p>
                                <textarea id="configTextArea" rows="25" class="form-control bg-dark text-light border-secondary font-monospace"></textarea>
                                <button class="btn btn-success mt-3" onclick="editConfig()">
                                    <i class="fas fa-save"></i> Save Config
                                </button>
                                <pre id="configResult" class="bg-secondary text-light p-2 rounded small mt-2"></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Plugin Manager -->
                    <div class="col-lg-6">
                        <div class="card bg-dark border-secondary h-100">
                            <div class="card-body">
                                <h5 class="card-title text-light"><i class="fas fa-puzzle-piece"></i> Plugin Manager</h5>
                                <p class="text-muted">Install and manage beets plugins</p>
                                <div class="overflow-auto" style="max-height: 600px;">
                                    <div id="pluginsList">
                                        <div class="text-center p-4 text-muted">Loading plugins...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/library.js"></script>
    <script src="static/js/main.js"></script>
    <script src="static/js/plugins.js"></script>
    <script src="static/js/tabs.js"></script>
    <script src="static/js/filebrowser.js"></script>
</body>
</html>